<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>8G103G — Quiz Wall</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body class="no-select">
  <header class="topbar">
    <div class="wrap">
      <div class="brand">
        <span class="badge">Skunkworks Academy</span>
        <span class="badge">8G103G</span>
        <span class="badge">Self-Paced Course</span>
      </div>
      <h1>Guardium Data Protection Fundamentals — Quiz Wall</h1>
      <p class="sub">
        Complete Modules 01–10. Each attempt draws a randomized subset from the module pool, shuffles options,
        enforces a timer and attempt limits, and provides detailed remediation.
      </p>
      <div class="actions">
        <button class="btn good" id="exportAllBtn">Export All Progress (JSON)</button>
        <button class="btn" id="importBtn">Import Progress (JSON)</button>
        <input type="file" id="importFile" accept="application/json" hidden>
        <button class="btn bad" id="resetAllBtn">Reset All</button>
        <a class="btn primary" href="final.html">Final Review</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="panel">
      <div class="kpis" id="kpis"></div>
      <div class="hr"></div>
      <h2>Modules</h2>
      <div class="grid" id="wall"></div>
    </section>

    <footer class="footer">
      Static-only delivery (GitHub Pages). Deterrents reduce casual cheating but cannot prevent a determined user.
    </footer>
  </main>

  <script src="assets/app.js"></script>
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      CourseApp.enableDeterrents({ watermarkText: '8G103G | Skunkworks Academy', fullscreenOptional: true });

      CourseApp.renderWall({ mountId: 'wall', kpiId: 'kpis' });

      document.getElementById('exportAllBtn').addEventListener('click', () => CourseApp.exportAll());

      document.getElementById('resetAllBtn').addEventListener('click', () => {
        if (confirm('Reset all modules on this browser?')) {
          CourseApp.resetAll();
          location.reload();
        }
      });

      const importBtn = document.getElementById('importBtn');
      const importFile = document.getElementById('importFile');

      importBtn.addEventListener('click', () => importFile.click());

      importFile.addEventListener('change', async (e) => {
        const f = e.target.files && e.target.files[0];
        if (!f) return;
        try {
          await CourseApp.importAll(await f.text());
          location.reload();
        } catch (err) {
          alert('Import failed: ' + err.message);
        } finally {
          importFile.value = '';
        }
      });
    });
  </script>
</body>
</html>

